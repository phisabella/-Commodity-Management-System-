<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>商品管理系统</title>
    <link th:href="@{/layui/css/layui.css}" rel="stylesheet" />
</head>
<style>
    html * {font-size: medium;}
</style>
<body class="layui-layout-body">
<input type="hidden" th:value="${session.user.level}" name="level" id="level">
<!--    <div class="layui-body">-->
        <!-- 内容主体区域 -->

        <fieldset class="layui-elem-field layui-field-title" style="margin-top: 30px;">
            <legend>角色管理</legend>
        </fieldset>

<!--<form class="layui-form" th:action="@{/user/updatename}">-->
<form class="layui-form" >
    <div class="layui-form-item">
        <div class="layui-inline">
            <label class="layui-form-label">角色</label>
            <div class="layui-input-inline">
                <input name="level3" id="level3" class="layui-input" type="text" autocomplete="off" value="" th:value="${level3}" lay-verify="required" >
            </div>
        </div>
    </div>
    <div class="layui-form-item">
        <label class="layui-form-label">权限级别</label>
        <div class="layui-input-block">
<!--            <input name="level" title="level 1" disabled=""  type="radio">-->
<!--            <input name="level" title="level 2" disabled="" type="radio">-->
            <input name="sex" title="高级权限" checked  type="radio" value="禁">
        </div>
    </div>

<!--</form>-->

<!--<form class="layui-form" action="">-->
    <div class="layui-form-item">
        <label class="layui-form-label">角色</label>
        <div class="layui-input-inline">
            <input name="level2" id="level2" class="layui-input" type="text" placeholder="" value="" autocomplete="off" th:value="${level2}" lay-verify="required">
        </div>
    </div>
    <div class="layui-form-item">
        <label class="layui-form-label">权限级别</label>
        <div class="layui-input-block">
<!--            <input name="level" title="level 1" disabled=""  type="radio">-->
            <input name="level" title="中级权限" checked  type="radio">
<!--            <input name="level" title="level 3"  disabled="" type="radio" >-->
        </div>
    </div>

<!--</form>-->

<!--<form class="layui-form" action="">-->
    <div class="layui-form-item">
        <label class="layui-form-label">角色</label>
        <div class="layui-input-inline">
            <input name="level1" id="level1" class="layui-input" type="text" value="" placeholder="" th:value="${level1}" autocomplete="off"  lay-verify="required">
        </div>
    </div>
    <div class="layui-form-item">
        <label class="layui-form-label">权限级别</label>
        <div class="layui-input-block">
            <input name="123" title="低级权限"  checked  type="radio">
<!--            <input name="level" title="level 2" disabled="" type="radio">-->
<!--            <input name="level" title="level 3"  disabled="" type="radio" >-->
        </div>
    </div>
    <div class="layui-form-item">
        <div class="layui-input-block">
            <button class="layui-btn" type="submit" lay-filter="update" lay-submit="update">保存</button>
        </div>
    </div>
</form>

<fieldset class="layui-elem-field layui-field-title" style="margin-top: 30px;">
    <legend>访问控制策略</legend>
</fieldset>

<form class="layui-form" action="">

    <div class="layui-form-item">
        <label class="layui-form-label">查阅信息</label>
        <div class="layui-input-block" style="left: 20px">
            <input name="level" title="低级权限" checked  type="radio">
            <input name="level" title="中级权限" disabled="" type="radio">
            <input name="level" title="高级权限" disabled="" type="radio" >
<!--            <input name="level" title="低级权限" checked  type="radio">-->
<!--            <input name="level" title="中级权限" disabled="" type="radio">-->
<!--            <input name="level" title="高级权限" disabled=""  type="radio" >-->
        </div>
<!--        <div class="layui-input-block" style="position: relative;left: 350px;bottom: 35px">-->
<!--&lt;!&ndash;            <button class="layui-btn" type="submit" lay-filter="demo1" disabled="" lay-submit="">保存</button>&ndash;&gt;-->
<!--        </div>-->
    </div>
</form>

<form class="layui-form" action="">
    <div class="layui-form-item">
        <label class="layui-form-label">业务处理</label>
        <div class="layui-input-block" id="editt" style="left: 20px">
            <input name="gai" title="低级权限" value="1"  type="radio">
            <input name="gai" title="中级权限" value="2"  type="radio">
            <input name="gai" title="高级权限"  value="3" type="radio" >
<!--            <input name="level" title="低级权限"   type="radio">-->
<!--            <input name="level" title="中级权限" checked type="radio">-->
<!--            <input name="level" title="高级权限"  type="radio" >-->
        </div>

    </div>
    <div class="layui-form-item">
        <label class="layui-form-label">用户管理</label>
        <div class="layui-input-block" id="shann" style="left: 20px">
            <input name="shan" title="低级权限" disabled=""  type="radio">
            <input name="shan" title="中级权限" value="2" type="radio">
            <input name="shan" title="高级权限" value="3"  type="radio" >

        </div>

    </div>
    <div class="layui-input-block" >
        <button class="layui-btn" type="submit" lay-filter="edit" lay-submit="">保存</button>
    </div>
<!--</form>-->

<!--    <form class="layui-form" action="">-->
<!--    <div class="layui-form-item">-->
<!--        <label class="layui-form-label">用户管理</label>-->
<!--        <div class="layui-input-block" id="shann" style="left: 20px">-->
<!--            <input name="shan" title="level 1" disabled=""  type="radio">-->
<!--            <input name="shan" title="level 2" value="2" type="radio">-->
<!--            <input name="shan" title="level 3" value="3"  type="radio" >-->
<!--&lt;!&ndash;            <input name="level" title="低级权限"   type="radio">&ndash;&gt;-->
<!--&lt;!&ndash;            <input name="level" title="中级权限" type="radio">&ndash;&gt;-->
<!--&lt;!&ndash;            <input name="level" title="高级权限" checked type="radio" >&ndash;&gt;-->
<!--        </div>-->
<!--&lt;!&ndash;        <div class="layui-input-block" style="position: relative;left: 350px;bottom: 35px">&ndash;&gt;-->
<!--&lt;!&ndash;            <button class="layui-btn" type="submit" lay-filter="shan" lay-submit="change">保存</button>&ndash;&gt;-->
<!--&lt;!&ndash;        </div>&ndash;&gt;-->
<!--    </div>-->
<!--    </form>-->

<!--权限控制-->
<!--<input type="hidden" th:value="${session.level.kan}" name="read" id="read">-->
<!--<input type="hidden" th:value="${session.level.gai}" name="edit" id="edit">-->
<!--<input type="hidden" th:value="${session.level.shan}" name="delete" id="delete">-->
<!--权限控制-->

<!--单选框显示-->
<input type="hidden" th:value="${gai}" name="gai" id="gai">
<input type="hidden" th:value="${shan}" name="shan" id="shan">

</body>

<script th:src="@{/layui/layui.js}"></script>
<script th:src="@{/jquery-3.5.1.min.js}"></script>

<script>
    var gai=document.getElementById('gai').value;
    var shan=document.getElementById('shan').value;

    //根据session设置单选初始选项
    $(function(){
        $("input:radio[name='gai'][value="+gai+"]").attr('checked','true');
        $("input:radio[name='shan'][value="+shan+"]").attr('checked','true');
    });

    //JavaScript代码区域
    layui.use('element', function() {
        var element = layui.element;
    });

    layui.use('form', function(){
        var form = layui.form;

    });

    layui.use(['form','layer'], function () {

        //改角色名字
        var form = layui.form;
        var $= layui.$
        var layer =layui.layer;

        form.on('submit(update)', function (data) {
            var level1=document.getElementById('level1').value;
            var level2=document.getElementById('level2').value;
            var level3 = document.getElementById('level3').value;
            // console.log("level2:"+level2);
            // console.log("level1:"+level1);
            // console.log("level3:"+level3);
            $.ajax({
                url:'/web/user/updatename',
                type:'get',
                data:{'level1':level1,'level2':level2,'level3':level3},//向服务端发送删除的id
                success:function(suc){
                    layer.msg("修改成功",{icon:1});
                }
            });
            return false;
        });
        //改角色名字

        //改权限
        form.on('submit(edit)', function (data) {
            // let shan=document.getElementById('shann').value;
            // let gai=document.getElementById('editt').value;
            let gai= $("input[name='gai']:checked").val();
            let shan= $("input[name='shan']:checked").val();
            console.log("shan:"+shan);
            console.log("gai:"+gai);
            $.ajax({
                url:'/web/user/updatelevel',
                type:'get',
                data:{'shan':shan,'gai':gai},//向服务端发送删除的id
                success:function(suc){
                    layer.msg("修改成功",{icon:1});
                }
            });
            return false;
        });


        // form.on('submit(shan)', function (data) {
        //     var shann=document.getElementById('shann').value;
        //     console.log("shann:"+shann);
        //     $.ajax({
        //         url:'/web/user/updatelevel',
        //         type:'get',
        //         data:{'level1':level1,'level2':level2,'level3':level3},//向服务端发送删除的id
        //         success:function(suc){
        //             layer.msg("修改成功",{icon:1});
        //         }
        //     });
        //     return false;
        // });
        //改权限



    });
</script>

</html>